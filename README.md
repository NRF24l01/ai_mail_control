# AI mail controller


## Элементы системы:
**Почта воркер**
- Берёт не сохранённые письма с почты, сохраняет в бд
- Отправляет не отправленные из бд
- Работает раз в минуту
- Отфильтровывает спам, и сохраняет его в редис чтоб потом не класть его в бд

**Вайб-воркер**
- Берёт не обработанное письмо
- Отдаёт в чат-гпт
- Получает что это за сообщение
- Сохраняет тип сообщения в бд
- Сохраняет рекомендуемый ответ(берёт их из стандартных конфигов)
- Засыпает на некоторое время
- Все промпты и разрешённые ответы берутся из настроек(табличка в бд)

**Телеграм бот**
- Берёт не обработанные сообщения
- Отправляет их в тг админам
- Админы могут перейти в веб интерфейс, или отправить стандартную отбивку по кнопке
- Если отправляем отбивку, то сохраняем в бд, и потом почтовый воркер это отправит

**Веб интерфейс**
- Фронт+бек
- Fastapi+vue.js
- Пользователь входит
- Пользователь видит список почт и количество не прочитанных писем
- Пользователь тыкает на почту
- Пользователь видит всю историю переписки, и снизу он видит поле заполненное сгенерированным ответом
- Если отправляет, то письмо кладётся в бд и будет отправлено почтовым воркером 